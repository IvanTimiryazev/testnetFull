{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivylou/Desktop/pythonProject/keysee/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ivylou/Desktop/pythonProject/keysee/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{keysAction}from\"./keys\";import{callNotification}from\"./notification-actions\";import{spinnerActions}from\"./spinner\";export var fetchKeysData=function fetchKeysData(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var fetchData,keyList;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(spinnerActions.showSpinner());fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/v1/keys\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\")),\"Content-Type\":\"application/json\"}});case 2:response=_context.sent;dispatch(spinnerActions.hideSpinner());if(response.ok){_context.next=6;break;}throw new Error(\"Fetching keys failed ...\");case 6:_context.next=8;return response.json();case 8:data=_context.sent;return _context.abrupt(\"return\",data);case 10:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();_context2.prev=2;_context2.next=5;return fetchData();case 5:keyList=_context2.sent;dispatch(keysAction.replaceKeys({items:keyList||[]}));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch(callNotification(\"error\",_context2.t0.message));case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var addKey=function addKey(keyItem){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var sendRequest;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(spinnerActions.showSpinner());sendRequest=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/api/v1/keys\",{method:\"POST\",body:JSON.stringify({key:keyItem}),headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\")),\"Content-Type\":\"application/json\"}});case 2:response=_context3.sent;dispatch(spinnerActions.hideSpinner());if(response.ok){_context3.next=6;break;}throw new Error(\"Adding key failed ...\");case 6:dispatch(fetchKeysData());case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function sendRequest(){return _ref4.apply(this,arguments);};}();_context4.prev=2;_context4.next=5;return sendRequest();case 5:_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](2);dispatch(callNotification(\"error\",_context4.t0.message));case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[2,7]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};export var deleteKey=function deleteKey(id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(dispatch){var sendRequest;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch(spinnerActions.showSpinner());sendRequest=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"/api/v1/keys\",{method:\"DELETE\",body:JSON.stringify({id:id}),headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\")),\"Content-Type\":\"application/json\"}});case 2:response=_context5.sent;dispatch(spinnerActions.hideSpinner());if(response.ok){_context5.next=6;break;}throw new Error(\"Deleting key failed ...\");case 6:dispatch(fetchKeysData());case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function sendRequest(){return _ref6.apply(this,arguments);};}();_context6.prev=2;_context6.next=5;return sendRequest();case 5:_context6.next=10;break;case 7:_context6.prev=7;_context6.t0=_context6[\"catch\"](2);dispatch(callNotification(\"error\",_context6.t0.message));case 10:case\"end\":return _context6.stop();}}},_callee6,null,[[2,7]]);}));return function(_x3){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"names":["keysAction","callNotification","spinnerActions","fetchKeysData","dispatch","showSpinner","fetchData","fetch","method","headers","Authorization","localStorage","getItem","response","hideSpinner","ok","Error","json","data","keyList","replaceKeys","items","message","addKey","keyItem","sendRequest","body","JSON","stringify","key","deleteKey","id"],"sources":["/Users/ivylou/Desktop/pythonProject/keysee/src/store/keys-actions.js"],"sourcesContent":["import { keysAction } from \"./keys\";\nimport { callNotification } from \"./notification-actions\";\nimport { spinnerActions } from \"./spinner\";\n\nexport const fetchKeysData = () => {\n  return async (dispatch) => {\n    dispatch(spinnerActions.showSpinner());\n    const fetchData = async () => {\n      const response = await fetch(\"/api/v1/keys\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      dispatch(spinnerActions.hideSpinner());\n\n      if (!response.ok) {\n        throw new Error(\"Fetching keys failed ...\");\n      }\n\n      const data = await response.json();\n      return data;\n    };\n\n    try {\n      const keyList = await fetchData();\n      dispatch(\n        keysAction.replaceKeys({\n          items: keyList || [],\n        })\n      );\n    } catch (err) {\n      dispatch(callNotification(\"error\", err.message));\n    }\n  };\n};\n\nexport const addKey = (keyItem) => {\n  return async (dispatch) => {\n    dispatch(spinnerActions.showSpinner());\n    const sendRequest = async () => {\n      const response = await fetch(\"/api/v1/keys\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          key: keyItem,\n        }),\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      dispatch(spinnerActions.hideSpinner());\n\n      if (!response.ok) {\n        throw new Error(\"Adding key failed ...\");\n      }\n\n      dispatch(fetchKeysData());\n    };\n\n    try {\n      await sendRequest();\n    } catch (err) {\n      dispatch(callNotification(\"error\", err.message));\n    }\n  };\n};\n\nexport const deleteKey = (id) => {\n  return async (dispatch) => {\n    dispatch(spinnerActions.showSpinner());\n    const sendRequest = async function () {\n      const response = await fetch(\"/api/v1/keys\", {\n        method: \"DELETE\",\n        body: JSON.stringify({\n          id: id,\n        }),\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      dispatch(spinnerActions.hideSpinner());\n\n      if (!response.ok) {\n        throw new Error(\"Deleting key failed ...\");\n      }\n\n      dispatch(fetchKeysData());\n    };\n\n    try {\n      await sendRequest();\n    } catch (err) {\n      dispatch(callNotification(\"error\", err.message));\n    }\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}