{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ivylou/Desktop/pythonProject/keysee/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ivylou/Desktop/pythonProject/keysee/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{callNotification}from\"./notification-actions\";import{tweetsActions}from\"./tweets\";export var fetchTweetsData=function fetchTweetsData(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var sendRequest,tweets;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(tweetsActions.showLoading());sendRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/v1/parsing\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\")),\"Content-Type\":\"application/json\"}});case 2:response=_context.sent;dispatch(tweetsActions.hideLoading());_context.next=6;return response.json();case 6:data=_context.sent;console.log(data);if(response.ok){_context.next=10;break;}throw new Error(\"Parcing failed... Please try again.\");case 10:return _context.abrupt(\"return\",data);case 11:case\"end\":return _context.stop();}}},_callee);}));return function sendRequest(){return _ref2.apply(this,arguments);};}();_context2.prev=2;_context2.next=5;return sendRequest();case 5:tweets=_context2.sent;dispatch(tweetsActions.replaceTweets({items:tweets||[]}));_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);// dispatch(callNotification(\"error\", err.message));\nconsole.log(_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var fetchLastResult=function fetchLastResult(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var sendRequest,tweets;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch(tweetsActions.showLoading());sendRequest=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"/api/v1/last_results\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\")),\"Content-Type\":\"application/json\"}});case 2:response=_context3.sent;dispatch(tweetsActions.hideLoading());if(response.ok){_context3.next=6;break;}throw new Error(\"Something went wrong ...\");case 6:_context3.next=8;return response.json();case 8:data=_context3.sent;dispatch(callNotification(\"loaded\",\"Previous successful result loaded.\"));return _context3.abrupt(\"return\",data);case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function sendRequest(){return _ref4.apply(this,arguments);};}();_context4.prev=2;_context4.next=5;return sendRequest();case 5:tweets=_context4.sent;dispatch(tweetsActions.replaceTweets({items:tweets||[]}));_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);dispatch(callNotification(\"error\",_context4.t0.message));case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[2,9]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};","map":{"version":3,"names":["callNotification","tweetsActions","fetchTweetsData","dispatch","showLoading","sendRequest","fetch","method","headers","Authorization","localStorage","getItem","response","hideLoading","json","data","console","log","ok","Error","tweets","replaceTweets","items","message","fetchLastResult"],"sources":["/Users/ivylou/Desktop/pythonProject/keysee/src/store/tweets-actions.js"],"sourcesContent":["import { callNotification } from \"./notification-actions\";\nimport { tweetsActions } from \"./tweets\";\n\nexport const fetchTweetsData = () => {\n  return async (dispatch) => {\n    dispatch(tweetsActions.showLoading());\n    const sendRequest = async () => {\n      const response = await fetch(\"/api/v1/parsing\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      dispatch(tweetsActions.hideLoading());\n\n      const data = await response.json();\n      console.log(data);\n\n      if (!response.ok) {\n        throw new Error(\"Parcing failed... Please try again.\");\n      }\n\n      // console.log(data);\n      return data;\n    };\n\n    try {\n      const tweets = await sendRequest();\n      dispatch(\n        tweetsActions.replaceTweets({\n          items: tweets || [],\n        })\n      );\n    } catch (err) {\n      // dispatch(callNotification(\"error\", err.message));\n      console.log(err.message);\n    }\n  };\n};\n\nexport const fetchLastResult = () => {\n  return async (dispatch) => {\n    dispatch(tweetsActions.showLoading());\n    const sendRequest = async () => {\n      const response = await fetch(\"/api/v1/last_results\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      dispatch(tweetsActions.hideLoading());\n\n      if (!response.ok) {\n        throw new Error(\"Something went wrong ...\");\n      }\n\n      const data = await response.json();\n      dispatch(\n        callNotification(\"loaded\", \"Previous successful result loaded.\")\n      );\n\n      return data;\n    };\n\n    try {\n      const tweets = await sendRequest();\n      dispatch(\n        tweetsActions.replaceTweets({\n          items: tweets || [],\n        })\n      );\n    } catch (err) {\n      dispatch(callNotification(\"error\", err.message));\n    }\n  };\n};\n"],"mappings":"gRAAA,OAASA,gBAAgB,KAAQ,wBAAwB,CACzD,OAASC,aAAa,KAAQ,UAAU,CAExC,MAAO,IAAMC,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CACnC,iGAAO,kBAAOC,QAAQ,+IACpBA,QAAQ,CAACF,aAAa,CAACG,WAAW,EAAE,CAAC,CAC/BC,WAAW,6FAAG,6KACKC,MAAK,CAAC,iBAAiB,CAAE,CAC9CC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,CACxD,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,QANIC,QAAQ,eAOdT,QAAQ,CAACF,aAAa,CAACY,WAAW,EAAE,CAAC,CAAC,sBAEnBD,SAAQ,CAACE,IAAI,EAAE,QAA5BC,IAAI,eACVC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC,CAAC,GAEbH,QAAQ,CAACM,EAAE,+BACR,IAAIC,MAAK,CAAC,qCAAqC,CAAC,yCAIjDJ,IAAI,yDACZ,kBAnBKV,YAAW,oFAsBMA,YAAW,EAAE,QAA5Be,MAAM,gBACZjB,QAAQ,CACNF,aAAa,CAACoB,aAAa,CAAC,CAC1BC,KAAK,CAAEF,MAAM,EAAI,EACnB,CAAC,CAAC,CACH,CAAC,mFAEF;AACAJ,OAAO,CAACC,GAAG,CAAC,aAAIM,OAAO,CAAC,CAAC,sEAE5B,+DACH,CAAC,CAED,MAAO,IAAMC,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CACnC,kGAAO,kBAAOrB,QAAQ,+IACpBA,QAAQ,CAACF,aAAa,CAACG,WAAW,EAAE,CAAC,CAC/BC,WAAW,6FAAG,mLACKC,MAAK,CAAC,sBAAsB,CAAE,CACnDC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACPC,aAAa,kBAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,CACxD,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,QANIC,QAAQ,gBAOdT,QAAQ,CAACF,aAAa,CAACY,WAAW,EAAE,CAAC,CAAC,GAEjCD,QAAQ,CAACM,EAAE,+BACR,IAAIC,MAAK,CAAC,0BAA0B,CAAC,+BAG1BP,SAAQ,CAACE,IAAI,EAAE,QAA5BC,IAAI,gBACVZ,QAAQ,CACNH,gBAAgB,CAAC,QAAQ,CAAE,oCAAoC,CAAC,CACjE,CAAC,iCAEKe,IAAI,2DACZ,kBApBKV,YAAW,oFAuBMA,YAAW,EAAE,QAA5Be,MAAM,gBACZjB,QAAQ,CACNF,aAAa,CAACoB,aAAa,CAAC,CAC1BC,KAAK,CAAEF,MAAM,EAAI,EACnB,CAAC,CAAC,CACH,CAAC,mFAEFjB,QAAQ,CAACH,gBAAgB,CAAC,OAAO,CAAE,aAAIuB,OAAO,CAAC,CAAC,CAAC,sEAEpD,iEACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}